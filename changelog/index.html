<html lang=en>
 <head>
  <meta charset=UTF-8><meta name=viewport
      content="width=device-width, initial-scale=1">
  <title>ChangeLog</title>
  <link rel=alternate
        href="https://40ants.com/log4cl-extras/changelog.xml"
        type="application/rss+xml">
  <link rel=stylesheet type="text/css"
        href="../theme.css">
  <script type="text/javascript" src="../jquery.js"></script>
  <script type="text/javascript" src="../toc.js"></script>
  <script type="text/javascript">$(document).ready(function() {$('a:has(img)').css('border-bottom', 'none')})</script>
  <link rel=stylesheet type="text/css"
      href="../highlight.min.css">
  <script type="text/javascript"
          src="../highlight.min.js"></script>
  <script type="text/javascript">hljs.highlightAll();</script>
<style type="text/css">
/* Стили для сворачиваемого меню */
.sidebar ul ul {
  display: none; /* Скрываем все подменю по умолчанию */
  margin-left: 0.5em;
}

.sidebar li.expanded > ul {
  display: block; /* Показываем подменю для развернутых элементов */
}

/* Стили для пунктов с подменю */
.sidebar li.has-children > a {
  cursor: pointer;
  position: relative;
  padding-left: 1.2em;
}

.sidebar li.has-children > p > a {
  position: relative;
  left: -1rem;
}

.sidebar li.has-children > p > a::before {
  content:"►";
}

.sidebar li.has-children.expanded > p > a::before {
  content: "▼";
  position: relative;
  left: -0.08rem;
}

/* Подсветка активного пункта */
.sidebar li.active > a {
  font-weight: bold;
}

/* Если активная страница находится в подменю, раскрываем родителя */
.sidebar li.active-parent {
  font-weight: normal;
}

.sidebar li.active-parent > ul {
  display: block;
}
</style>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-FL71WXK73K"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-FL71WXK73K');
    </script>

    <!-- Yandex.Metrika counter -->
    <script type="text/javascript" >
       (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
       m[i].l=1*new Date();
       for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
       k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
       (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

       ym(42462884, "init", {
            clickmap:true,
            trackLinks:true,
            accurateTrackBounce:true
       });
    </script>
    <noscript><div><img src="https://mc.yandex.ru/watch/42462884" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
    <!-- /Yandex.Metrika counter -->

 </head>
 <body>
  <div class=page><a id=fork-me href="https://github.com/40ants/log4cl-extras">Fork me on GitHub</a>
   <div class=navbar>
    <div class=navbar-inner>
     <a class=brand href="/">
      <img class=logo
           src="https://40ants.com/img/logo.svg"></a>
     <ul class=nav>
      <li><a href="/posts/">Blog</a>
      <li><a href="/ru/posts/">Blog (RU)</a>
      <li><a href="/tips/">Lisp Tips</a>
      <li><a href="/projects/">Our Projects</a>
      <li><a href="/about/">About</a>
     </ul>
    </div>
   </div>
   <input type=checkbox id=sidebar-check>
   <label for=sidebar-check>
    <div id=sidebar-trigger>
     <span></span><span></span><span></span>
    </div></label><div class=sidebar><div class=header><form class=search method=GET
      action="../search/">
      <input type=text name=q>
      <input type=submit value=Search><span id=search-progress></span>
     </form>
    </div><div class=content><div class=page-toc><ul><li><p><a href="../#x-28LOG4CL-EXTRAS-2FDOC-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../" data-node="x-28LOG4CL-EXTRAS-2FDOC-3A-40INDEX-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">LOG4CL-EXTRAS - Addons for Log4CL</a></p><ul><li><p><a href="../#log4-cl-extras-asdf-system-details" data-document="../" data-node="log4-cl-extras-asdf-system-details">LOG4CL-EXTRAS ASDF System Details</a></p></li><li><p><a href="../#x-28LOG4CL-EXTRAS-2FDOC-3A-3A-40INSTALLATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../" data-node="x-28LOG4CL-EXTRAS-2FDOC-3A-3A-40INSTALLATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Installation</a></p></li><li><p><a href="../#x-28LOG4CL-EXTRAS-2FCONFIG-3A-3A-40CONFIGURATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../" data-node="x-28LOG4CL-EXTRAS-2FCONFIG-3A-3A-40CONFIGURATION-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Configuration</a></p><ul><li><p><a href="../#layouts" data-document="../" data-node="layouts">Layouts</a></p></li></ul></li><li><p><a href="../#x-28LOG4CL-EXTRAS-2FCONTEXT-3A-3A-40CONTEXT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../" data-node="x-28LOG4CL-EXTRAS-2FCONTEXT-3A-3A-40CONTEXT-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Context Fields</a></p></li><li><p><a href="../#x-28LOG4CL-EXTRAS-2FERROR-3A-3A-40ERRORS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../" data-node="x-28LOG4CL-EXTRAS-2FERROR-3A-3A-40ERRORS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Logging Unhandled Errors</a></p><ul><li><p><a href="../#x-28LOG4CL-EXTRAS-2FERROR-3A-3A-40INTRO-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../" data-node="x-28LOG4CL-EXTRAS-2FERROR-3A-3A-40INTRO-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Quickstart</a></p></li><li><p><a href="../#x-28LOG4CL-EXTRAS-2FERROR-3A-3A-40PRINTING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../" data-node="x-28LOG4CL-EXTRAS-2FERROR-3A-3A-40PRINTING-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Printing Backtrace</a></p></li><li><p><a href="../#api" data-document="../" data-node="api">API</a></p></li></ul></li><li><p><a href="../#x-28LOG4CL-EXTRAS-2FSECRETS-3A-3A-40KEEPING-SECRETS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../" data-node="x-28LOG4CL-EXTRAS-2FSECRETS-3A-3A-40KEEPING-SECRETS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">How Keep Secrets Out of Logs</a></p><ul><li><p><a href="../#x-28LOG4CL-EXTRAS-2FSECRETS-3A-3A-40EASY-WAY-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../" data-node="x-28LOG4CL-EXTRAS-2FSECRETS-3A-3A-40EASY-WAY-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Easy Way</a></p><ul><li><p><a href="../#but-this-is-not-a-silver-bullet" data-document="../" data-node="but-this-is-not-a-silver-bullet">But this is not a silver bullet</a></p></li></ul></li><li><p><a href="../#x-28LOG4CL-EXTRAS-2FSECRETS-3A-3A-40HARD-WAY-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../" data-node="x-28LOG4CL-EXTRAS-2FSECRETS-3A-3A-40HARD-WAY-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Hard Way</a></p></li></ul></li><li><p><a href="../#x-28LOG4CL-EXTRAS-2FAPPENDERS-3A-3A-40APPENDERS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="../" data-node="x-28LOG4CL-EXTRAS-2FAPPENDERS-3A-3A-40APPENDERS-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">Appenders</a></p></li></ul></li><li><p><a href="#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-40CHANGELOG-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29" data-document="" data-node="x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-40CHANGELOG-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29">ChangeLog</a></p></li></ul>
     </div>
    </div><div class=footer>
     <a href="https://40ants.com/doc">[generated by 40ANTS-DOC]</a>
    </div>
   </div><div class=content role=main><h1>ChangeLog<a class=rss-icon href="https://40ants.com/log4cl-extras/changelog.xml"></a></h1><h2>0.12.0 (2026-01-09)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E12-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E12-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3 id="added">Added</h3><p>Macro <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FSECRETS-3AWITH-SECRETS-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FSECRETS-3AWITH-SECRETS-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>log4cl-extras/secrets:with-secrets</code></a> was added. It allows to solve the problem with passing secret values right into the third party libraries which do not support <code>secret-values:secret-value</code> objects.</p><h2>0.11.1 (2025-10-05)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E11-2E1-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E11-2E1-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3 id="fixed">Fixed</h3><p>Previously you may encounter this sort of errors when trying to get a backtrace or use <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>log4cl-extras/error:with-log-unhandled</code></a> macro:</p><pre><code class="">Traceback (most recent call last):n[unable to format because of Unable to get traceback because of another error during printing:n#&lt;PRINT-NOT-READABLE {1213990E43}&gt; cannot be printed readably.&quot;},&quot;level&quot;:&quot;ERROR&quot;,&quot;message&quot;:&quot;Unhandled exception&quot;,&quot;timestamp&quot;:&quot;2025-10-05T16:23:40.869358Z&quot;</code></pre><p>This error occured when <code>*print-readably*</code> variable was bound to <code>T</code>.</p><p>Now <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3APRINT-BACKTRACE-20FUNCTION-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3APRINT-BACKTRACE-20FUNCTION-29"><code>log4cl-extras/error:print-backtrace</code></a> function binds <code>*print-readably*</code> to <code>NIL</code> when rendering a backtrace. This might change how do your backtraces look like.</p><h2>0.11.0 (2024-03-01)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E11-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E11-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3 id="changed">Changed</h3><p>Macro <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>log4cl-extras/error:with-log-unhandled</code></a> now handles <code>SERIOUS-CONDITION</code> instead of <code>ERROR</code>. This is important, because <code>ERROR</code> is not a only subclass of the <code>SERIOUS-CONDITION</code>, for example, <code>SB-EXT:TIMEOUT</code> is inherited directly from <code>SERIOUS-CONDITION</code> and old version of the macro was not able to log such errors.</p><h2>0.10.0 (2023-11-19)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E10-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E10-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3 id="new">New</h3><p>Variable <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FAPPENDERS-3A-2ADEBUG-ON-ERROR-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FAPPENDERS-3A-2ADEBUG-ON-ERROR-2A-20-28VARIABLE-29-29"><code>log4cl-extras/appenders:*debug-on-error*</code></a> was added and can be used to debug issues happening when handling log messages.
When this option is <code>NIL</code>, appenders defined in log4cl-extras will only output &quot;Unable to log the message&quot; message in case of errors
during the message output.</p><h3 id="fixes">Fixes</h3><ul><li><p>Package log4cl-extras now is created when library is loaded. This should fix a warning from <code>ASDF</code> about missing package.</p></li></ul><h2>0.9.0 (2022-12-30)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E9-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E9-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><p>Function <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3APRINT-BACKTRACE-20FUNCTION-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3APRINT-BACKTRACE-20FUNCTION-29"><code>log4cl-extras/error:print-backtrace</code></a> now prints conditions with type like:</p><pre><code class="">Condition REBLOCKS-WEBSOCKET:NO-ACTIVE-WEBSOCKETS: No active websockets bound to the current page.</code></pre><p>instead of:</p><p>Condition: No active websockets bound to the current page.</p><h2>0.8.0 (2022-11-04)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E8-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E8-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><ul><li><p>Macro <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>log4cl-extras/error:with-log-unhandled</code></a> now has <code>ERRORS-TO-IGNORE</code> argument.
You can pass a list of class-names of conditions which should not be logged.</p></li></ul><h2>0.7.2 (2022-10-03)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E7-2E2-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E7-2E2-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><ul><li><p>Backtrace printer was fixed to work on Clozure<code>CL</code>.</p></li></ul><h2>0.7.1 (2022-08-06)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E7-2E1-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E7-2E1-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><ul><li><p>Now <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FSECRETS-3AMAKE-SECRETS-REPLACER-20FUNCTION-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FSECRETS-3AMAKE-SECRETS-REPLACER-20FUNCTION-29"><code>log4cl-extras/secrets:make-secrets-replacer</code></a> is able to mask secret values even in strings nested in the lists.
  This fixes issue of leaking Authorization tokens when some <code>HTTP</code> error is logged.</p><p>Previously, backtrace was logged like this:</p><pre><code class="">1 File &quot;/Users/art/projects/lisp/cloud-analyzer/.qlot/dists/ultralisp/software/fukamachi-dexador-20220619102143/src/backend/usocket.lisp&quot;, line 451
    In DEXADOR.BACKEND.USOCKET:REQUEST
  Args (#&lt;unavailable argument&gt; :METHOD :GET :HEADERS ((&quot;Authorization&quot; . &quot;OAuth AQAEA5qgMKaqAAffdZ0Nw7BqTkCTlp6ii80Gdmo&quot;)))</code></pre><p>and oauth token leaked to the log storage.</p><p>After this fix, backtrace will be logged like this:</p><pre><code class="">1 File &quot;/Users/art/projects/lisp/cloud-analyzer/.qlot/dists/ultralisp/software/fukamachi-dexador-20220619102143/src/backend/usocket.lisp&quot;, line 451
    In DEXADOR.BACKEND.USOCKET:REQUEST
  Args (#&lt;unavailable argument&gt; :METHOD :GET :HEADERS ((&quot;Authorization&quot; . &quot;OAuth #&lt;secret value&gt;&quot;)))</code></pre></li><li><p>A new variable <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3A-2AARGS-FILTER-CONSTRUCTORS-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3A-2AARGS-FILTER-CONSTRUCTORS-2A-20-28VARIABLE-29-29"><code>log4cl-extras/error:*args-filter-constructors*</code></a> was introduced. It should be used together
  with <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FSECRETS-3AMAKE-SECRETS-REPLACER-20FUNCTION-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FSECRETS-3AMAKE-SECRETS-REPLACER-20FUNCTION-29"><code>log4cl-extras/secrets:make-secrets-replacer</code></a> to prevent secrets collection during the program life.</p><p>Previosly, when you created a secrets replaced and stored in in the <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3A-2AARGS-FILTERS-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3A-2AARGS-FILTERS-2A-20-28VARIABLE-29-29"><code>log4cl-extras/error:*args-filters*</code></a> variable,
all secrets from logged backtraces were collected in a closure's state. When
<a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3A-2AARGS-FILTER-CONSTRUCTORS-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3A-2AARGS-FILTER-CONSTRUCTORS-2A-20-28VARIABLE-29-29"><code>log4cl-extras/error:*args-filter-constructors*</code></a> variable is used, a new secrets replacer will be created
for processing of each backtrace.</p></li></ul><h2>0.7.0 (2022-07-03)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E7-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E7-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><ul><li><p>Macro <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>log4cl-extras/error:with-log-unhandled</code></a> now uses internal function and you can change backtrace length on the fly by changing <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3A-2AMAX-TRACEBACK-DEPTH-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3A-2AMAX-TRACEBACK-DEPTH-2A-20-28VARIABLE-29-29"><code>log4cl-extras/error:*max-traceback-depth*</code></a> variable.</p></li><li><p>Also, <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3A-2AMAX-CALL-LENGTH-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3A-2AMAX-CALL-LENGTH-2A-20-28VARIABLE-29-29"><code>log4cl-extras/error:*max-call-length*</code></a> variable was documented.</p></li></ul><h2>0.6.0 (2021-10-03)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E6-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E6-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><ul><li><p>Now <code>:PLAIN</code> and <code>:JSON</code> logger will output logger's category, filename and a callable name.</p></li></ul><h2>0.5.1 (2021-03-02)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E5-2E1-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E5-2E1-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><ul><li><p>Fixed fail during logging error with <code>(setf some-func)</code> in the backtrace.</p></li></ul><h2>0.5.0 (2021-01-24)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E5-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E5-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><ul><li><p>Function <code>TRACEBACK-TO-STRING</code> was removed and
  replaced with <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3APRINT-BACKTRACE-20FUNCTION-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3APRINT-BACKTRACE-20FUNCTION-29"><code>log4cl-extras/error:print-backtrace</code></a> which is now
  a part of public <code>API</code>.</p></li><li><p>Added ability to filter secret and sensitive values.
  Read documentation, to lear more.</p></li></ul><h2>0.4.2 (2020-11-26)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E4-2E2-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E4-2E2-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3 id="fixed">Fixed</h3><ul><li><p>Fixed <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>with-log-unhandled</code></a> for cases when some function argument's print-object signaled the error.</p></li></ul><p>Because of this nasty error, sometimes <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>with-log-unhandled</code></a> didn't log &quot;Unandled error&quot;.</p><h3 id="added">Added</h3><ul><li><p>Now <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>log4cl-extras/error:with-log-unhandled</code></a> macro accepts key argument <code>DEPTH</code> which is 10 by default.</p></li></ul><p>This argument can be overriden by setting <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3A-2AMAX-TRACEBACK-DEPTH-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3A-2AMAX-TRACEBACK-DEPTH-2A-20-28VARIABLE-29-29"><code>log4cl-extras/error:*max-traceback-depth*</code></a>.</p><ul><li><p>Also another variable <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3A-2AMAX-CALL-LENGTH-2A-20-28VARIABLE-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3A-2AMAX-CALL-LENGTH-2A-20-28VARIABLE-29-29"><code>log4cl-extras/error:*max-call-length*</code></a> can be set to control
  how long function or method name can be. By default it is 100, but methods are logged along
  with their specialized arguments and can be longer.</p></li></ul><h2>0.4.1 (2019-03-05)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E4-2E1-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E4-2E1-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3 id="fixed">Fixed</h3><ul><li><p>Added missing dependency from <code>CL-STRINGS</code> system.</p></li></ul><h2>0.4.0 (2019-03-04)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E4-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E4-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3 id="improved">Improved</h3><p>Now <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FCONFIG-3ASETUP-20FUNCTION-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FCONFIG-3ASETUP-20FUNCTION-29"><code>log4cl-extras/config:setup</code></a> sets appender into a mode when it prints log in a human
readable way if it its called from the <code>SLY</code>'s <code>REPL</code>. All logger fields are
printed as well, including a traceback.</p><h2>0.3.0 (2019-01-07)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E3-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E3-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3 id="improved">Improved</h3><ul><li><p>Now condition's description is added to the end of the backtrace.</p></li></ul><h2>0.2.2 (2018-12-08)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E2-2E2-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E2-2E2-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3 id="fixed">Fixed</h3><ul><li><p>Fixed system's loading in environments with <code>C</code> locale.</p></li></ul><p>This closes issue reported along with pull request #1.</p><h2>0.2.1 (2018-11-24)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E2-2E1-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E2-2E1-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3 id="fixed">Fixed</h3><ul><li><p>Previously, macros <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>log4cl-extras/error:with-log-unhandled</code></a> catched every signal,
  not only signals derived from <code>ERROR</code>. Because of that,
  it logged traceback for non error signals like that:</p></li></ul><p><code>lisp
  (log4cl-json/error:with-log-unhandled ()
      (signal &quot;foo&quot;))
</code></p><p>Now this bad behavior was fixed and only <code>errors</code> are logged.</p><h2>0.2.0 (2017-08-29)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E2-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E2-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><h3 id="new">New</h3><ul><li><p>Added ability to log tracebacks using <a href="https://40ants.com/log4cl-extras/#x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29" data-document="https://40ants.com/log4cl-extras/" data-node="x-28LOG4CL-EXTRAS-2FERROR-3AWITH-LOG-UNHANDLED-20-2840ANTS-DOC-2FLOCATIVES-3AMACRO-29-29"><code>log4cl-extras/error:with-log-unhandled</code></a>.</p></li></ul><h2>0.1.0 (2017-01-23)<a class=header-link
     href=#x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E1-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29
     title="Permalink to this headline"
     id=x-28LOG4CL-EXTRAS-2FCHANGELOG-3A-3A-7C0-2E1-2E0-7C-2040ANTS-DOC-2FLOCATIVES-3ASECTION-29></a></h2><ul><li><p>Initial version.</p></li></ul>
   </div><div class=footer>
    <hr class=separator>
    <p class=fineprint>Created with passion by <em>40Ants</em><a class=lisp-logo
     href="http://lisp-lang.org/">
      <img
           src="https://40ants.com/img/made-with-lisp.svg"></a>
   </div>
<script>
document.addEventListener('DOMContentLoaded', function() {
  // Ключ для localStorage
  const STORAGE_KEY = 'log4cl-extras/doc-menu-state';
  
  // Загружаем сохраненное состояние меню
  function loadMenuState() {
    try {
      const savedState = localStorage.getItem(STORAGE_KEY);
      return savedState ? JSON.parse(savedState) : {};
    } catch (e) {
      console.error('Ошибка при загрузке состояния меню:', e);
      return {};
    }
  }
  
  // Сохраняем текущее состояние меню
  function saveMenuState(state) {
    try {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    } catch (e) {
      console.error('Ошибка при сохранении состояния меню:', e);
    }
  }
  
  // Получаем уникальный идентификатор для пункта меню
  function getMenuItemId(item) {
    const link = item.querySelector('a');
    if (!link) return null;
    
    // Используем текст ссылки как идентификатор
    // Можно также использовать href, но он может меняться в зависимости от текущей страницы
    return link.innerText.trim();
  }
  
  // Загружаем сохраненное состояние
  const menuState = loadMenuState();
  
  // Находим все пункты меню с подпунктами
  const menuItems = document.querySelectorAll('.sidebar li');
  
  // Обрабатываем каждый пункт меню
  menuItems.forEach(item => {
    const subMenu = item.querySelector('ul');
    
    // Если у пункта есть подменю
    if (subMenu) {
      const itemId = getMenuItemId(item);
      item.classList.add('has-children');
      
      // Восстанавливаем состояние из localStorage, если оно сохранено
      if (itemId && menuState[itemId]) {
        item.classList.add('expanded');
      }
      
      // Добавляем обработчик клика
      const link = item.querySelector('a');
      if (link) {
        link.addEventListener('click', function(e) {
          // Останавливаем переход по ссылке только если кликнули по пункту с подменю
          if (item.classList.contains('has-children')) {
            e.preventDefault();
            
            // Переключаем класс для раскрытия/скрытия
            item.classList.toggle('expanded');
            
            // Сохраняем новое состояние
            if (itemId) {
              if (item.classList.contains('expanded')) {
                menuState[itemId] = true;
              } else {
                delete menuState[itemId];
              }
              saveMenuState(menuState);
            }
          }
        });
      }
    }
  });
  
  // Функция для поиска и раскрытия родителей активного пункта
  function expandActiveItemParents() {
    const activeItem = document.querySelector('.sidebar li.active');
    if (activeItem) {
      let parent = activeItem.parentElement;
      
      while (parent) {
        if (parent.tagName === 'UL' && parent.parentElement && parent.parentElement.tagName === 'LI') {
          parent.parentElement.classList.add('expanded');
          parent.parentElement.classList.add('active-parent');
          
          // Сохраняем состояние активного родителя
          const parentItem = parent.parentElement;
          const parentId = getMenuItemId(parentItem);
          if (parentId) {
            menuState[parentId] = true;
          }
        }
        parent = parent.parentElement;
      }
      
      // Сохраняем обновленное состояние после раскрытия активных родителей
      saveMenuState(menuState);
    }
  }
  
  // Запускаем функцию для текущей страницы
  expandActiveItemParents();
});
</script>


  </div>
 </body>
</html>